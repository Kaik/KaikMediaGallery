(function (global) {
    'use strict';

    const textDialog = (...args) => {
        console.log('xxxx');
        // Wrapper
        const $section = document.createElement('div');
        $section.className = 'text-dialog input-group';
        //text input
        const $textInput = document.createElement('input');
        $textInput.className = 'add-text-input form-control';
        $textInput.setAttribute('type', 'text');
        $textInput.setAttribute('name', 'add-text-input');
        $textInput.setAttribute('placeholder', '');
        //buttons wrapper
        const $btnGroup = document.createElement('span');
        $btnGroup.className = 'input-group-btn';
        const $button = document.createElement('button');
        $button.className = 'btn btn-primary';
        $button.setAttribute('type', 'button');
        $button.setAttribute('name', 'add-text-input');

        $section.appendChild($textInput);
        $section.appendChild($btnGroup);
        $btnGroup.appendChild($button);
        
	// Set config
	if(typeof args[0] === 'object') {
	    if(args[0].parent !== undefined) args[0].parent.appendChild($section)
            
	    if(args[0].placeholder_text !== undefined) $textInput.setAttribute('placeholder', args[0].placeholder_text)
	    if(args[0].button_text !== undefined) $button.appendChild(document.createTextNode(args[0].button_text));
	}

	// Return promise/callvack
	return new Promise((resolve, reject) => {
            
	    $button.addEventListener('click', e => {
		resolve($textInput.value)
                args[0].parent.removeChild($section)
	    })

	    // Simluate click event
//	    const evt = document.createEvent('MouseEvents');
//	    evt.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
//	    input.dispatchEvent(evt);
	})
    }
    // Set either CommonJS/AMD/Global
    if (typeof define === 'function' && define.amd) {
	define(function () { return textDialog; });
    } else if (typeof exports !== 'undefined') {
	if (typeof module !== 'undefined' && module.exports) {
	    exports = module.exports = textDialog;
	}
	exports.textDialog = textDialog;
    } else {
	global.textDialog = textDialog;
    }
})(this);

//            $button.setAttribute('placeholder', '');
            
            
         //
        // Text
//  placeholder: Translator.__('Enter YouTube Url')
//            ,
//            button: Translator.__('Search'),
//            multiple: collection.multiple,
//            accept: handler.accept, 
        
//	function textDialog(css_class, placeholder_text, button_text) {
///
//	}
//	;
                //display text form
//                displayDialog(
//                        
//                textDialog('add-text' , Translator.__('Enter YouTube Url'), Translator.__('Search')));
//        
//                $('.add-text').click(function (e) {
//                    e.preventDefault();
//                    handleText($(this));
//                });
//
//
//	// IE10/11 Addition
//	input.style.display = 'none';
//	input.setAttribute('id', 'hidden-file')
//	document.body.appendChild(input)   
            
            
//            $btnGroup.setAttribute('placeholder', '');
//            $textInput.setAttribute('placeholder', '');
            
    //	const input = document.createElement('input')
//<input type='text' name='add-text-input' class='add-text-input form-control' placeholder='" + placeholder_text + "'>\n\
//<span class='input-group-btn'>\n\
//<button class='"+ css_class +" btn btn-primary' type='button'>" + button_text + "</button>\n\
//</span>            
            
            
//            // Button
//            const $button_like = document.createElement('button');
//            const $button_like_textNode = document.createTextNode('Like');
//            $button_like.appendChild($button_like_textNode);
//            
//            // Button
//            const $button_like = document.createElement('button');
//            const $button_like_textNode = document.createTextNode('Like');
//            $button_like.appendChild($button_like_textNode);
//            // Share Button
//            const $button_share = document.createElement('button');

            
            // Append buttons to wrapper
//            $section.appendChild($button_like);
//            $section.appendChild($button_share);


//        var template
        
//        // The template script HTML content
//        var template = document.getElementById('my-template').innerHTML
//        var anchor = document.createElement('span')
//        // Loop through each object in the people array and create an
//        // element based on #my-template HTML
//        people.forEach(function (person) {
//            // Create element containing the HTML included in #my-template
//          var el = document.createElement('div')
//          el.innerHTML = template
//          console.log(el)
//            // Add content to elements idefntified by class name
//          el.getElementsByClassName('name')[0].appendChild(document.createTextNode(person.name))
//          el.getElementsByClassName('age')[0].appendChild(document.createTextNode(person.name))
//            // Add src to image
//          el.getElementsByClassName('image')[0].setAttribute('src', person.image)
//            // Adds value if a property exists and removes the parent p tag that
//            // if the property does not exist.
//          if (person.favorite) {
//            el.getElementsByClassName('yes')[0].appendChild(document.createTextNode(person.favorite))
//          } else {
//            el.getElementsByClassName('favorite')[0].remove()
//          }
//            // Add element to anchor, to be rendered when loop has finished
//            // This is used to avoid unnecesary document reflow
//          anchor.appendChild(el)
//        })
//        // Add anchor to DOM
//        document.getElementById('list').appendChild(anchor)
        
        
        
///            var $html = $("<div class='input-group'>\n\
//<input type='text' name='add-text-input' class='add-text-input form-control' placeholder='" + placeholder_text + "'>\n\
//<span class='input-group-btn'>\n\
//<button class='"+ css_class +" btn btn-primary' type='button'>" + button_text + "</button>\n\
//</span></div>");
//            return $html;