{% block header %}
    {{ adminHeader() }}
    {{ pageAddAsset('stylesheet', zasset('@KaikmediaGalleryModule:css/style.css')) }}
    {{ pageAddAsset('javascript', zasset('@KaikmediaGalleryModule:js/Kaikmedia.Gallery.settings.js')) }}
   {{ pageAddAsset('javascript', zasset('jquery-ui/jquery-ui.min.js')) }}
    
    
{#    <script>#}
{#    (function($) {#}
{#            $(function(){#}
{#                KaikMedia.Gallery.settings.set({{ settings|json_encode|raw }});#}
{#            });#}
{#    })(jQuery);#}
{#    console.log(this);#}
{#    </script>#}
    
    {% set formInitScript %}
        <script type="text/javascript">
            console.log('start0');
            /* <![CDATA[ */
            (function ($) {
                $(document).ready(function () {
                        // initialise auto completion for user fields
                        console.log('start1');
                        KaikMedia.Gallery.settings.set({{ settings|json_encode|raw }});
                    });
                })(jQuery);
                /* ]]> */
        </script>
    {% endset %}
{#    {% set formCss %}
        <style>

        {{ pageAddAsset('javascript', zasset('@ZikulaUsersModule:js/Zikula.Users.LiveSearch.js')) }}
        .ui-autocomplete {
            max-height: 150px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        * html .ui-autocomplete {
            height: 150px;
        }

        .ui-autocomplete-loading {
            background: white url('../images/indicator_arrows.gif') right center no-repeat;
        }

        .ui-autocomplete .suggestion {
            margin: 0;
            padding: 0.2em 0 0.2em 20px;
            list-style-type: none;
            line-height: 1.4em;
            cursor: pointer;
            display: block;
            background-position: 2px 2px;
            background-repeat: no-repeat;
            background-color: #fff;
        }

        .ui-autocomplete .suggestion {
            background-image: url('../images/user.png');
        }
        .ui-autocomplete .suggestion img {
            max-width: 20px;
            max-height: 20px;
        }

        .ui-autocomplete .suggestion .ui-state-active {
            background-color: #ffb;
        }

        .ui-autocomplete .suggestion .media-body {
            font-size: 10px;
            color: #888;
        }
        .ui-autocomplete .suggestion .media-body .media-heading {
            font-size: 12px;
            line-height: 1.2em;
        }
        .ui-autocomplete .suggestion {
            background-image: none;
        }
        .ui-autocomplete .suggestion {
            margin: 0;
            padding: 0.2em 0 0.2em 5px;
            list-style-type: none;
            line-height: 1.4em;
            cursor: pointer;
            display: block;
            background-position: 2px 2px;
            background-repeat: no-repeat;
            background-color: #fff;
        }
        </style>
    {% endset %}

{# load required assets: jQuery UI + custom search code #}
{#{{ pageAddAsset('stylesheet', asset('jquery-ui/themes/base/jquery-ui.min.css')) }}
{{ pageAddAsset('javascript', asset('jquery-ui/jquery-ui.min.js')) }}#}
{{ pageAddAsset('footer', formInitScript) }}
{#{{ pageAddAsset('header', formCss) }}#}
    
    
{% endblock %}
{% block title %}
      <h1>
       {{ title_icon|raw }} {{ title }}
        {{ pageSetVar('title', title) }}
      </h1>
       {{ showflashes() }}
{% endblock %} 
{% block content %}{% endblock %}
{% block footer %}
    {{ adminFooter() }}
{% endblock %}